<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/markdown/examples/invoker-tests-dist.md.vm at 2025-08-21
 | Rendered using Apache Maven Fluido Skin 2.1.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <meta name="author" content="Robert Scholte" />
    <meta name="date" content="2017-03-20" />
    <title>Using with Maven Invoker with distribution management – Mock Repository Manager Maven Plugin</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-2.1.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-2.1.0.min.js"></script>
    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
        _paq.push(['disableCookies']);
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);

        (function() {
            var u="https://analytics.apache.org/";
            _paq.push(['setTrackerUrl', u+'/matomo.php']);
            _paq.push(['setSiteId', '18']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->
    <style>.github-fork-ribbon:before { background-color: gray; }</style>
  </head>
  <body>
    <a class="github-fork-ribbon right-top" href="https://github.com/mojohaus/mrm-maven-plugin" data-ribbon="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href="../../../"><img src="../../../images/mojo_logo.png" alt="MojoHaus" /></a></h1></div></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li><a href="../../../">MojoHaus</a><span class="divider">/</span></li>
      <li><a href="../..">Mock Repository Manager :: Project</a><span class="divider">/</span></li>
      <li><a href="../index.html">Mock Repository Manager Maven Plugin</a><span class="divider">/</span></li>
    <li class="active">Using with Maven Invoker with distribution management <a href="https://github.com/mojohaus/mrm/tree/master/mrm-maven-plugin/src/site/markdown/examples/invoker-tests-dist.md.vm"><img src="../images/accessories-text-editor.png" alt="Edit" /></a></li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2025-08-21</li>
          <li id="projectVersion" class="pull-right"><span class="divider">|</span>Version: 1.7.0</li>
        <li class="pull-right"><a href="https://maven.apache.org/">Maven</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Parent Project</li>
    <li><a href="../../index.html">Mock Repository Manager :: Project</a></li>
   <li class="nav-header">Overview</li>
    <li><a href="../index.html">Introduction</a></li>
    <li><a href="../plugin-info.html">Goals</a></li>
    <li><a href="../usage.html">Usage</a></li>
   <li class="nav-header">Examples</li>
    <li><a href="../examples/invoker-tests.html">Using with Maven Invoker (download)</a></li>
    <li class="active"><a>Using with Maven Invoker (upload)</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<!---
Copyright 2011 Stephen Connolly

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<section><a id="Using_with_Maven_Invoker_and_Distribution_Management"></a>
<h1>Using with Maven Invoker and Distribution Management</h1>
<p>When we want to test the distribution of artifacts, we'll have to add a separate execution block:
one which is used for the repositories (read, see <a href="./invoker-tests.html">Using with Maven Invoker and repositories</a>)
and a second one which is used for distribution management (write).</p>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
  ...
  &lt;build&gt;
    ...
    &lt;plugins&gt;
      ...
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-invoker-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.9.1&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;goals&gt;
              &lt;goal&gt;install&lt;/goal&gt;
              &lt;goal&gt;integration-test&lt;/goal&gt;
              &lt;goal&gt;verify&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
        &lt;configuration&gt;
          &lt;filterProperties&gt;
            &lt;mrm.distribution.url&gt;${mrm.distribution.url}&lt;/mrm.distribution.url&gt;
          &lt;/filterProperties&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
        &lt;artifactId&gt;mrm-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;1.7.0&lt;/version&gt;
        &lt;executions&gt;
          ...
          &lt;execution&gt;
            &lt;id&gt;distribution&lt;/id&gt;
            &lt;goals&gt;
              &lt;goal&gt;start&lt;/goal&gt;
              &lt;goal&gt;stop&lt;/goal&gt;
            &lt;/goals&gt;
	        &lt;configuration&gt;
	          &lt;propertyName&gt;mrm.distribution.url&lt;/propertyName&gt;
	          &lt;repositories&gt;
	            &lt;hostedRepo&gt;
	              &lt;target&gt;target/hosted-repo&lt;/target&gt;
	            &lt;/hostedRepo&gt;
	          &lt;/repositories&gt;
	        &lt;/configuration&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
      ...
    &lt;/plugins&gt;
    ...
  &lt;/build&gt;
  ...
&lt;/project&gt;
</code></pre>
<p>Next you need to ensure per <code>pom.xml</code> that the value of <code>mrm.distribution.url</code> is used for the distribution management.</p>

<pre class="prettyprint"><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project&gt;
  ...
  &lt;distributionManagement&gt;
    &lt;repository&gt;
      &lt;id&gt;mrm&lt;/id&gt;
      &lt;url&gt;${mrm.distribution.url}&lt;/url&gt;
    &lt;/repository&gt;
    &lt;snapshotRepository&gt;
      &lt;id&gt;mrm&lt;/id&gt;
      &lt;url&gt;${mrm.distribution.url}&lt;/url&gt;
    &lt;/snapshotRepository&gt;
  &lt;/distributionManagement&gt;
  ...
&lt;/project&gt;
</code></pre>
<p>If you want to split the snapshotRepository from the (release) repository, you have to add an extra execution-block with a different propertyName.</p>
<p>Since you've defined <code>target/hosted-repo</code> as the upload directory, you can use the postbuild-script from the maven-invoker-plugin to verify if all artifacts were uploaded as expected.</p></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2009–2025
<a href="https://www.mojohaus.org">MojoHaus</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>